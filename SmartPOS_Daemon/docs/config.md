–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å:
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
Invoke-RestMethod http://127.0.0.1:7077/config/get

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≤–∏—Å–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 –º–∏–Ω—É—Ç):
$config = @{ sticky_max_sec = 600 } | ConvertTo-Json
Invoke-RestMethod http://127.0.0.1:7077/config/set -Method POST -Body $config -ContentType 'application/json'

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 —Å–µ–∫—É–Ω–¥):
$config = @{ cancel_delay_sec = 5.0 } | ConvertTo-Json
Invoke-RestMethod http://127.0.0.1:7077/config/set -Method POST -Body $config -ContentType 'application/json'

–ü–æ—Å—Ç–∞–≤–∏—Ç—å ¬´–∑–∞–ª–∏–ø–∞–Ω–∏–µ¬ª –Ω–∞ 10 –º–∏–Ω—É—Ç –∏ –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π 30 —Å–µ–∫:
$body = @{ sticky_max_sec = 600; cancel_delay_sec = 30 } | ConvertTo-Json
Invoke-RestMethod http://127.0.0.1:7077/config/set -Method POST -Body $body -ContentType 'application/json'

–í–µ—Ä–Ω—É—Ç—å ¬´–±—ã—Å—Ç—Ä—ã–π —Å—Ç–µ–Ω–¥¬ª:
$body = @{ sticky_max_sec = 180; cancel_delay_sec = 0.5 } | ConvertTo-Json
Invoke-RestMethod http://127.0.0.1:7077/config/set -Method POST -Body $body -ContentType 'application/j

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –º–µ–Ω—è—Ç—å –≤—Ä–µ–º—è –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ –ª–µ—Ç—É –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–µ–º–æ–Ω–∞! üéâ

–ö–æ—Ä–æ—Ç–∫–æ:

¬´–û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≤–∏—Å–∞–Ω–∏—è¬ª ‚Äî —ç—Ç–æ —Ç–∞–π–º–µ—Ä –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—á–µ–≥–æ –ø–æ—Ç–æ–∫–∞ ¬´–∑–∞–ª–∏–ø–∞–Ω–∏—è¬ª (sticky-worker), –∫–æ—Ç–æ—Ä—ã–π –¥–µ—Ä–∂–∏—Ç –ø–µ—á–∞—Ç–Ω—ã–π –¥–∂–æ–± –æ—Ç–∫—Ä—ã—Ç—ã–º
(–±–µ–∑ EndPage/EndDoc) –¥–æ –æ—Ç–º–µ–Ω—ã –∏–ª–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –¥–µ–¥–ª–∞–π–Ω–∞. –£ —Ç–µ–±—è —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å deadline = time.time() + 180.0: 180 —Å–µ–∫—É–Ω–¥ = 3 –º–∏–Ω—É—Ç—ã
–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ ¬´–∑–∞–ª–∏–ø–∞–Ω–∏—è¬ª, –µ—Å–ª–∏ –º—ã –µ–≥–æ –Ω–µ –æ—Ç–º–µ–Ω–∏–º —Ä–∞–Ω—å—à–µ.

¬´–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π¬ª ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –æ—Ç–º–µ–Ω—ã –∑–∞–ª–∏–ø–∞–Ω–∏—è –≤ —à–∞–≥–µ cancel_demo_sticky. –£ —Ç–µ–±—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ time.sleep(5.0),
—Ç.–µ. –¥–∞–∂–µ –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è PR0018, –º—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∂–¥—ë–º 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã ¬´–ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤–∏—Å–µ–ª–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ¬ª, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º —à–ª—ë–º cancel_sticky_jobs(...).

–ß—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:

–£–≤–µ–ª–∏—á–∏–≤–∞–µ—à—å –æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 600 —Å–µ–∫) ‚Üí sticky-job –±—É–¥–µ—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–æ 10 –º–∏–Ω—É—Ç, –µ—Å–ª–∏ –Ω–µ –Ω–∞–∂–º—É—Ç ¬´–õ–µ—á–∏—Ç—å¬ª (PR0018).
–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–ª–∏–Ω–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ ¬´–∑–∞–≤–∏—Å–∞–Ω–∏—è¬ª, –Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å —É–≤–∏–¥–µ—Ç—å ¬´–î–æ–ª–≥–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ‚Ä¶¬ª –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ.

–£–≤–µ–ª–∏—á–∏–≤–∞–µ—à—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 30 —Å–µ–∫) ‚Üí –¥–∞–∂–µ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è ¬´–õ–µ—á–∏—Ç—å¬ª –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–∂–¥–µ—Ç 30 —Å–µ–∫, –∑–∞—Ç–µ–º –æ—Ç–º–µ–Ω–∏—Ç –∑–∞–ª–∏–ø–∞–Ω–∏–µ.
–ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –¥–∞—Ç—å –∑—Ä–∏—Ç–µ–ª—é ¬´–Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π¬ª, –Ω–æ –¥–ª—è ¬´–±—ã—Å—Ç—Ä–æ–≥–æ¬ª —Å—Ç–µ–Ω–¥–∞ –ª—É—á—à–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å 0‚Äì0.5 —Å–µ–∫.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∏—Ç—Ä–∏–Ω—ã:

–ï—Å–ª–∏ —Ü–µ–ª—å ‚Äî –±—ã—Å—Ç—Ä–æ —á–∏–Ω–∏—Ç—å: –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π = 0.2‚Äì0.5 —Å–µ–∫, –¥–µ–¥–ª–∞–π–Ω sticky = 120‚Äì180 —Å–µ–∫.

–ï—Å–ª–∏ —Ü–µ–ª—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å ¬´–∫–∞–∫ –≤–∏—Å–∏—Ç¬ª: –∑–∞–¥–µ—Ä–∂–∫—É = 5‚Äì10 —Å–µ–∫, –¥–µ–¥–ª–∞–π–Ω sticky = 600 —Å–µ–∫ (10 –º–∏–Ω), –Ω–æ –¥–æ–±–∞–≤—å ¬´–∫—Ä–∞—Å–∏–≤—É—é —á–∏—Å—Ç–∫—É¬ª
(soft/force purge), –∏ –∑–∞–ø—É—Å–∫–∞–π –¥–µ–º–æ–Ω –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —á—Ç–æ–±—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–±–∏—Ä–∞—Ç—å —Ö–≤–æ—Å—Ç—ã ¬´–£–¥–∞–ª–µ–Ω–∏–µ‚Ä¶¬ª.
